dh_pnl = sum(scaled_managed_pnl)
) %>%
group_by(loss_trigger) %>%
summarize(
avg_pnl = mean(dh_pnl)
, sd_pnl = sd(dh_pnl)
, sharpe = (mean(dh_pnl) / sd(dh_pnl)) * sqrt(252)
) %>% View()
ggplot() +
geom_point(aes(x=loss_trigger, y=sharpe)) +
labs(
title = "weekly: delta-hedge"
)
df_pnl_weekly %>%
filter(strategy == "strangle") %>%
filter(variation == 0.1) %>%
filter(dh_threshold == 0) %>%
group_by(loss_trigger, data_date) %>%
summarize(
dh_pnl = sum(scaled_managed_pnl)
) %>%
group_by(loss_trigger) %>%
summarize(
avg_pnl = mean(dh_pnl)
, sd_pnl = sd(dh_pnl)
, sharpe = (mean(dh_pnl) / sd(dh_pnl)) * sqrt(252)
) %>%
ggplot() +
geom_point(aes(x=loss_trigger, y=sharpe)) +
labs(
title = "weekly: delta-hedge"
)
df_pnl_weekly %>%
filter(loss_trigger != 1000) %>%
filter(strategy == "strangle") %>%
filter(variation == 0.1) %>%
filter(dh_threshold == 0) %>%
group_by(loss_trigger, data_date) %>%
summarize(
dh_pnl = sum(scaled_managed_pnl)
) %>%
group_by(loss_trigger) %>%
summarize(
avg_pnl = mean(dh_pnl)
, sd_pnl = sd(dh_pnl)
, sharpe = (mean(dh_pnl) / sd(dh_pnl)) * sqrt(252)
) %>%
ggplot() +
geom_point(aes(x=loss_trigger, y=sharpe)) +
labs(
title = "weekly: delta-hedge"
)
View(df_pnl_weekly)
df_pnl_weekly %>%
filter(loss_trigger == 1000) %>%
filter(strategy == "strangle") %>%
filter(variation == 0.1) %>%
filter(dh_threshold == 0) %>%
group_by(loss_trigger, data_date) %>%
summarize(
dh_pnl = sum(scaled_managed_pnl)
) %>%
group_by(loss_trigger) %>%
summarize(
avg_pnl = mean(dh_pnl)
, sd_pnl = sd(dh_pnl)
, sharpe = (mean(dh_pnl) / sd(dh_pnl)) * sqrt(252)
)
df_pnl_monthly %>%
filter(loss_trigger != 1000) %>%
filter(strategy == "strangle") %>%
filter(variation == 0.1) %>%
filter(dh_threshold == 0) %>%
group_by(loss_trigger, data_date) %>%
summarize(
dh_pnl = sum(scaled_managed_pnl)
) %>%
group_by(loss_trigger) %>%
summarize(
avg_pnl = mean(dh_pnl)
, sd_pnl = sd(dh_pnl)
, sharpe = (mean(dh_pnl) / sd(dh_pnl)) * sqrt(252)
) %>% View()
df_pnl_monthly %>%
filter(loss_trigger != 1000) %>%
filter(strategy == "strangle") %>%
filter(variation == 0.1) %>%
filter(dh_threshold == 0) %>%
group_by(loss_trigger, data_date) %>%
summarize(
dh_pnl = sum(scaled_managed_pnl)
) %>%
group_by(loss_trigger) %>%
summarize(
avg_pnl = mean(dh_pnl)
, sd_pnl = sd(dh_pnl)
, sharpe = (mean(dh_pnl) / sd(dh_pnl)) * sqrt(252)
)
df_pnl_monthly %>%
filter(loss_trigger != 1000) %>%
filter(strategy == "strangle") %>%
filter(variation == 0.1) %>%
filter(dh_threshold == 0) %>%
group_by(loss_trigger, data_date) %>%
summarize(
dh_pnl = sum(scaled_managed_pnl)
) %>%
group_by(loss_trigger) %>%
summarize(
avg_pnl = mean(dh_pnl)
, sd_pnl = sd(dh_pnl)
, sharpe = (mean(dh_pnl) / sd(dh_pnl)) * sqrt(252)
) %>%
ggplot() +
geom_point(aes(x=loss_trigger, y=sharpe)) +
labs(
title = "monthly: delta-hedge"
)
df_pnl_weekly %>%
filter(strategy == "strangle") %>%
filter(variation == 0.1) %>%
filter(dh_threshold == 1) %>%
group_by(loss_trigger, data_date) %>%
summarize(
dh_pnl = sum(scaled_managed_pnl)
) %>%
group_by(loss_trigger) %>%
summarize(
avg_pnl = mean(dh_pnl)
, sd_pnl = sd(dh_pnl)
, sharpe = (mean(dh_pnl) / sd(dh_pnl)) * sqrt(252)
) %>% View()
ggplot() +
geom_point(aes(x=loss_trigger, y=sharpe)) +
labs(
title = "weekly: naked"
)
df_pnl_weekly %>%
filter(strategy == "strangle") %>%
filter(variation == 0.1) %>%
filter(dh_threshold == 1) %>%
group_by(loss_trigger, data_date) %>%
summarize(
dh_pnl = sum(scaled_managed_pnl)
) %>%
group_by(loss_trigger) %>%
summarize(
avg_pnl = mean(dh_pnl)
, sd_pnl = sd(dh_pnl)
, sharpe = (mean(dh_pnl) / sd(dh_pnl)) * sqrt(252)
) %>%
ggplot() +
geom_point(aes(x=loss_trigger, y=sharpe)) +
labs(
title = "weekly: naked"
)
df_pnl_weekly %>%
filter(loss_trigger != 1000) %>%
filter(strategy == "strangle") %>%
filter(variation == 0.1) %>%
filter(dh_threshold == 1) %>%
group_by(loss_trigger, data_date) %>%
summarize(
dh_pnl = sum(scaled_managed_pnl)
) %>%
group_by(loss_trigger) %>%
summarize(
avg_pnl = mean(dh_pnl)
, sd_pnl = sd(dh_pnl)
, sharpe = (mean(dh_pnl) / sd(dh_pnl)) * sqrt(252)
) %>%
ggplot() +
geom_point(aes(x=loss_trigger, y=sharpe)) +
labs(
title = "weekly: naked"
)
df_pnl_monthly %>%
filter(loss_trigger != 1000) %>%
filter(strategy == "strangle") %>%
filter(variation == 0.1) %>%
filter(dh_threshold == 1) %>%
group_by(loss_trigger, data_date) %>%
summarize(
dh_pnl = sum(scaled_managed_pnl)
) %>%
group_by(loss_trigger) %>%
summarize(
avg_pnl = mean(dh_pnl)
, sd_pnl = sd(dh_pnl)
, sharpe = (mean(dh_pnl) / sd(dh_pnl)) * sqrt(252)
) %>% View()
df_pnl_monthly %>%
filter(loss_trigger != 1000) %>%
filter(strategy == "strangle") %>%
filter(variation == 0.1) %>%
filter(dh_threshold == 1) %>%
group_by(loss_trigger, data_date) %>%
summarize(
dh_pnl = sum(scaled_managed_pnl)
) %>%
group_by(loss_trigger) %>%
summarize(
avg_pnl = mean(dh_pnl)
, sd_pnl = sd(dh_pnl)
, sharpe = (mean(dh_pnl) / sd(dh_pnl)) * sqrt(252)
) %>%
ggplot() +
geom_point(aes(x = loss_trigger, y = sharpe)) +
labs(
title = "monthly: naked"
)
df_pnl_weekly %>%
filter(loss_trigger == 1000) %>%
filter(strategy == "strangle") %>%
filter(variation == 0.1) %>%
filter(dh_threshold == 0) %>%
group_by(loss_trigger, data_date) %>%
summarize(
dh_pnl = sum(scaled_managed_pnl)
) %>%
group_by(loss_trigger) %>%
summarize(
avg_pnl = mean(dh_pnl)
, sd_pnl = sd(dh_pnl)
, sharpe = (mean(dh_pnl) / sd(dh_pnl)) * sqrt(252)
)
df_pnl_weekly %>%
filter(loss_trigger == 1000) %>%
filter(strategy == "strangle") %>%
filter(variation == 0.1) %>%
filter(dh_threshold == 1) %>%
group_by(loss_trigger, data_date) %>%
summarize(
dh_pnl = sum(scaled_managed_pnl)
) %>%
group_by(loss_trigger) %>%
summarize(
avg_pnl = mean(dh_pnl)
, sd_pnl = sd(dh_pnl)
, sharpe = (mean(dh_pnl) / sd(dh_pnl)) * sqrt(252)
)
# calculating sharpe for "unmanaged"
df_pnl_weekly %>%
filter(loss_trigger == 1000) %>%
filter(strategy == "strangle") %>%
filter(variation == 0.1) %>%
filter(dh_threshold == 0) %>%
group_by(loss_trigger, data_date) %>%
summarize(
dh_pnl = sum(scaled_pnl)
) %>%
group_by(loss_trigger) %>%
summarize(
avg_pnl = mean(dh_pnl)
, sd_pnl = sd(dh_pnl)
, sharpe = (mean(dh_pnl) / sd(dh_pnl)) * sqrt(252)
)
# calculating sharpe for "unmanaged"
df_pnl_weekly %>%
filter(loss_trigger == 1000) %>%
filter(strategy == "strangle") %>%
filter(variation == 0.1) %>%
filter(dh_threshold == 0) %>%
group_by(loss_trigger, data_date) %>%
summarize(
dh_pnl = sum(scaled_opt_pnl)
) %>%
group_by(loss_trigger) %>%
summarize(
avg_pnl = mean(dh_pnl)
, sd_pnl = sd(dh_pnl)
, sharpe = (mean(dh_pnl) / sd(dh_pnl)) * sqrt(252)
)
# calculating sharpe for "unmanaged" delta-hedge strategy
df_pnl_weekly %>%
filter(loss_trigger == 1000) %>%
filter(strategy == "strangle") %>%
filter(variation == 0.1) %>%
filter(dh_threshold == 0) %>%
group_by(loss_trigger, data_date) %>%
summarize(
dh_pnl = sum(scaled_managed_pnl)
) %>%
group_by(loss_trigger) %>%
summarize(
avg_pnl = mean(dh_pnl)
, sd_pnl = sd(dh_pnl)
, sharpe = (mean(dh_pnl) / sd(dh_pnl)) * sqrt(252)
)
# calculating sharpe for "unmanaged" naked strategy
# all underlyings combined
df_pnl_weekly %>%
filter(loss_trigger == 1000) %>%
filter(strategy == "strangle") %>%
filter(variation == 0.1) %>%
filter(dh_threshold == 1) %>%
group_by(loss_trigger, data_date) %>%
summarize(
dh_pnl = sum(scaled_managed_pnl)
) %>%
group_by(loss_trigger) %>%
summarize(
avg_pnl = mean(dh_pnl)
, sd_pnl = sd(dh_pnl)
, sharpe = (mean(dh_pnl) / sd(dh_pnl)) * sqrt(252)
)
df_pnl_weekly %>%
filter(loss_trigger = 1000)
df_pnl_weekly %>%
filter(loss_trigger == 1000)
df_pnl_weekly %>%
filter(loss_trigger == 1000) %>%
View()
df_pnl_weekly %>%
group_by(underlying, dh_threshold, loss_trigger, expiration) %>%
summarize(
breach_count = sum(any(breach))
)
df_pnl_weekly %>%
filter(loss_trigger = 1000) %>%
group_by(underlying, dh_threshold, loss_trigger, expiration) %>%
summarize(
breach_count = sum(any(breach))
)
df_pnl_weekly %>%
filter(loss_trigger == 1000) %>%
group_by(underlying, dh_threshold, loss_trigger, expiration) %>%
summarize(
breach_count = sum(any(breach))
)
df_pnl_weekly %>%
filter(loss_trigger == 1000) %>%
group_by(underlying, dh_threshold, loss_trigger, expiration) %>%
summarize(
breach_count = sum(any(breach))
) %>%
View()
df_pnl_weekly %>%
filter(loss_trigger == 10) %>%
group_by(underlying, dh_threshold, loss_trigger, expiration) %>%
summarize(
breach_count = sum(any(breach))
) %>%
View()
df_pnl_weekly %>%
filter(loss_trigger == 10) %>%
group_by(underlying, dh_threshold, loss_trigger, expiration) %>%
summarize(
breach = sum(any(breach))
) %>%
group_by(dh_thresh, loss_trigger) %>%
summarize(
breach_count = sum(breach)
)
df_pnl_weekly %>%
filter(loss_trigger == 10) %>%
group_by(underlying, dh_threshold, loss_trigger, expiration) %>%
summarize(
breach = sum(any(breach))
) %>%
group_by(dh_threshold, loss_trigger) %>%
summarize(
breach_count = sum(breach)
)
df_pnl_weekly %>%
filter(loss_trigger == 2.5) %>%
group_by(underlying, dh_threshold, loss_trigger, expiration) %>%
summarize(
breach = sum(any(breach))
) %>%
group_by(dh_threshold, loss_trigger) %>%
summarize(
breach_count = sum(breach)
)
df_pnl_weekly %>%
filter(loss_trigger == 2.5)
df_pnl_weekly
View(df_pnl_weekly)
df_pnl_weekly %>%
filter(loss_trigger == 1) %>%
group_by(underlying, dh_threshold, loss_trigger, expiration) %>%
summarize(
breach = sum(any(breach))
) %>%
group_by(dh_threshold, loss_trigger) %>%
summarize(
breach_count = sum(breach)
)
df_pnl_weekly %>%
filter(loss_trigger == 2) %>%
group_by(underlying, dh_threshold, loss_trigger, expiration) %>%
summarize(
breach = sum(any(breach))
) %>%
group_by(dh_threshold, loss_trigger) %>%
summarize(
breach_count = sum(breach)
)
df_pnl_weekly %>%
filter(loss_trigger == 3) %>%
group_by(underlying, dh_threshold, loss_trigger, expiration) %>%
summarize(
breach = sum(any(breach))
) %>%
group_by(dh_threshold, loss_trigger) %>%
summarize(
breach_count = sum(breach)
)
df_pnl_weekly %>%
filter(loss_trigger == 3.1) %>%
group_by(underlying, dh_threshold, loss_trigger, expiration) %>%
summarize(
breach = sum(any(breach))
) %>%
group_by(dh_threshold, loss_trigger) %>%
summarize(
breach_count = sum(breach)
)
df_pnl_weekly %>%
filter(loss_trigger == 3.0) %>%
group_by(underlying, dh_threshold, loss_trigger, expiration) %>%
summarize(
breach = sum(any(breach))
) %>%
group_by(dh_threshold, loss_trigger) %>%
summarize(
breach_count = sum(breach)
)
df_pnl_weekly %>% distinct(loss_trigger)
df_pnl_weekly %>% distinct(loss_trigger) %>% View()
df_pnl_weekly %>%
filter(loss_trigger == 3.0)
df_pnl_weekly %>%
filter(loss_trigger == 3.) %>%
group_by(underlying, dh_threshold, loss_trigger, expiration) %>%
summarize(
breach = sum(any(breach))
) %>%
group_by(dh_threshold, loss_trigger) %>%
summarize(
breach_count = sum(breach)
)
df_pnl_weekly %>%
filter(loss_trigger == 1000)
df_pnl_weekly %>%
filter(loss_trigger == 10)
df_pnl_weekly %>%
filter(loss_trigger == 5)
df_pnl_weekly %>%
filter(loss_trigger == 3)
df_pnl_weekly %>%
group_by(underlying, dh_threshold, loss_trigger, expiration) %>%
summarize(
breach = sum(any(breach))
) %>%
group_by(dh_threshold, loss_trigger) %>%
summarize(
breach_count = sum(breach)
)
df_breach_count <-
df_pnl_weekly %>%
group_by(underlying, dh_threshold, loss_trigger, expiration) %>%
summarize(
breach = sum(any(breach))
) %>%
group_by(dh_threshold, loss_trigger) %>%
summarize(
breach_count = sum(breach)
)
View(df_breach_count)
df_pnl_weekly %>%
filter(underlying == "DIA") %>%
filter(loss_trigger != 1000) %>%
filter(strategy == "strangle") %>%
filter(variation == 0.1) %>%
filter(dh_threshold == 0) %>%
group_by(loss_trigger, data_date) %>%
summarize(
dh_pnl = sum(scaled_managed_pnl)
) %>%
group_by(loss_trigger) %>%
summarize(
avg_pnl = mean(dh_pnl)
, sd_pnl = sd(dh_pnl)
, sharpe = (mean(dh_pnl) / sd(dh_pnl)) * sqrt(252)
) %>%
ggplot() +
geom_point(aes(x=loss_trigger, y=sharpe)) +
labs(
title = "weekly: delta-hedge"
)
df_pnl_weekly %>%
filter(loss_trigger != 1000) %>%
filter(strategy == "strangle") %>%
filter(variation == 0.1) %>%
filter(dh_threshold == 0) %>%
group_by(loss_trigger, data_date) %>%
summarize(
dh_pnl = sum(scaled_managed_pnl)
) %>%
group_by(loss_trigger) %>%
summarize(
avg_pnl = mean(dh_pnl)
, sd_pnl = sd(dh_pnl)
, sharpe = (mean(dh_pnl) / sd(dh_pnl)) * sqrt(252)
) %>%
ggplot() +
geom_point(aes(x=loss_trigger, y=sharpe)) +
labs(
title = "weekly: delta-hedge"
)
unlink('analysis/03_optimal_unwind_cache', recursive = TRUE)
