print()
}
lst_results <- list()
for (ix in 1:nrow(df_underlying)){
chr_und <- df_underlying$symbol[ix]
chr_und %>% print()
df_sharpe_underlying_weekly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 1) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean() %>%
print()
}
lst_result <- list()
for (ix in 1:nrow(df_underlying)){
chr_und <- df_underlying$symbol[ix]
dbl_opt_loss_trigger <-
df_sharpe_underlying_weekly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 1) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean()
lst_result <-
lst_result %>%
append() %>%
tibble(
tenor = "weekly"
, hedge = "naked"
, underlying = chr_und
, opt_loss_trigger =
)
}
lst_result <- list()
for (ix in 1:nrow(df_underlying)){
chr_und <- df_underlying$symbol[ix]
dbl_opt_loss_trigger <-
df_sharpe_underlying_weekly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 1) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean()
lst_result <-
lst_result %>%
append(
tibble(
tenor = "weekly"
, hedge = "naked"
, underlying = chr_und
, opt_loss_trigger =
)
)
}
lst_result <- list()
for (ix in 1:nrow(df_underlying)){
chr_und <- df_underlying$symbol[ix]
dbl_opt_loss_trigger <-
df_sharpe_underlying_weekly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 1) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "weekly"
, hedge = "naked"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
}
lst_result <- list()
for (ix in 1:nrow(df_underlying)){
chr_und <- df_underlying$symbol[ix]
dbl_opt_loss_trigger <-
df_sharpe_underlying_weekly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 1) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "weekly"
, hedge = "naked"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
}
bind_rows(lst_result)
lst_result <- list()
for (ix in 1:nrow(df_underlying)){
chr_und <- df_underlying$symbol[ix]
dbl_opt_loss_trigger <-
df_sharpe_underlying_weekly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 1) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "weekly"
, hedge = "naked"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
dbl_opt_loss_trigger <-
df_sharpe_underlying_weekly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 0) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "weekly"
, hedge = "dh"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
}
bind_rows(lst_result)
lst_result <- list()
for (ix in 1:nrow(df_underlying)){
chr_und <- df_underlying$symbol[ix]
# weekly naked
dbl_opt_loss_trigger <-
df_sharpe_underlying_weekly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 1) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "weekly"
, hedge = "naked"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
# weekly dh
dbl_opt_loss_trigger <-
df_sharpe_underlying_weekly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 0) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "weekly"
, hedge = "dh"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
# monthly naked
dbl_opt_loss_trigger <-
df_sharpe_underlying_monthly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 1) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "monthly"
, hedge = "naked"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
}
bind_rows(lst_result)
lst_result <- list()
for (ix in 1:nrow(df_underlying)){
chr_und <- df_underlying$symbol[ix]
# weekly naked
dbl_opt_loss_trigger <-
df_sharpe_underlying_weekly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 1) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "weekly"
, hedge = "naked"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
# weekly dh
dbl_opt_loss_trigger <-
df_sharpe_underlying_weekly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 0) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "weekly"
, hedge = "dh"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
# monthly naked
dbl_opt_loss_trigger <-
df_sharpe_underlying_monthly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 1) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "monthly"
, hedge = "naked"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
# monthly delta-hedge
dbl_opt_loss_trigger <-
df_sharpe_underlying_monthly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 0) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "monthly"
, hedge = "dh"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
}
bind_rows(lst_result)
lst_result <- list()
for (ix in 1:nrow(df_underlying)){
chr_und <- df_underlying$symbol[ix]
# weekly naked
dbl_opt_loss_trigger <-
df_sharpe_underlying_weekly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 1) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "weekly"
, hedge = "naked"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
# weekly dh
dbl_opt_loss_trigger <-
df_sharpe_underlying_weekly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 0) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "weekly"
, hedge = "dh"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
# monthly naked
dbl_opt_loss_trigger <-
df_sharpe_underlying_monthly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 1) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "monthly"
, hedge = "naked"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
# monthly delta-hedge
dbl_opt_loss_trigger <-
df_sharpe_underlying_monthly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 0) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "monthly"
, hedge = "dh"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
}
df_opt_loss_trigger <- bind_rows(lst_result)
df_opt_loss_trigger
df_opt_loss_trigger %>%
group_by(tenor, hedge) %>%
summarize(
opt_loss_trigger = mean(opt_loss_trigger)
)
df_opt_loss_trigger %>%
filter(tenor == "monthly") %>%
fitler(hedging = "naked")
df_opt_loss_trigger %>%
filter(tenor == "monthly") %>%
fitler(hedging == "naked")
df_opt_loss_trigger %>%
group_by(tenor, hedge) %>%
summarize(
opt_loss_trigger = mean(opt_loss_trigger)
)
df_opt_loss_trigger %>%
filter(tenor == "monthly") %>%
filter(hedging == "naked")
df_opt_loss_trigger %>%
group_by(tenor, hedge) %>%
summarize(
opt_loss_trigger = mean(opt_loss_trigger)
)
df_opt_loss_trigger %>%
filter(tenor == "monthly") %>%
filter(hedge == "naked")
df_opt_loss_trigger %>%
group_by(tenor, hedge) %>%
summarize(
opt_loss_trigger = mean(opt_loss_trigger)
)
df_opt_loss_trigger %>%
filter(tenor == "monthly") %>%
filter(hedge == "naked") %>%
arrange(loss_trigger)
df_opt_loss_trigger %>%
filter(tenor == "monthly") %>%
filter(hedge == "naked") %>%
arrange(opt_loss_trigger)
lst_result <- list()
for (ix in 1:nrow(df_underlying)){
chr_und <- df_underlying$symbol[ix]
# weekly naked
dbl_opt_loss_trigger <-
df_sharpe_underlying_weekly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 1) %>%
filter(loss_trigger <= 10) %>%
top_n(5, avg_pnl) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "weekly"
, hedge = "naked"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
# weekly dh
dbl_opt_loss_trigger <-
df_sharpe_underlying_weekly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 0) %>%
filter(loss_trigger <= 10) %>%
top_n(5, avg_pnl) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "weekly"
, hedge = "dh"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
# monthly naked
dbl_opt_loss_trigger <-
df_sharpe_underlying_monthly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 1) %>%
filter(loss_trigger <= 10) %>%
top_n(5, avg_pnl) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "monthly"
, hedge = "naked"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
# monthly delta-hedge
dbl_opt_loss_trigger <-
df_sharpe_underlying_monthly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 0) %>%
filter(loss_trigger <= 10) %>%
top_n(5, avg_pnl) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "monthly"
, hedge = "dh"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
}
df_opt_loss_trigger <- bind_rows(lst_result)
df_opt_loss_trigger %>%
group_by(tenor, hedge) %>%
summarize(
opt_loss_trigger = mean(opt_loss_trigger)
)
lst_result <- list()
for (ix in 1:nrow(df_underlying)){
chr_und <- df_underlying$symbol[ix]
# weekly naked
dbl_opt_loss_trigger <-
df_sharpe_underlying_weekly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 1) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "weekly"
, hedge = "naked"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
# weekly dh
dbl_opt_loss_trigger <-
df_sharpe_underlying_weekly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 0) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "weekly"
, hedge = "dh"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
# monthly naked
dbl_opt_loss_trigger <-
df_sharpe_underlying_monthly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 1) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "monthly"
, hedge = "naked"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
# monthly delta-hedge
dbl_opt_loss_trigger <-
df_sharpe_underlying_monthly %>%
filter(underlying == chr_und) %>%
filter(dh_threshold == 0) %>%
filter(loss_trigger <= 10) %>%
top_n(5, sharpe) %>%
.$loss_trigger %>%
mean()
lst_result[[length(lst_result) + 1]] <-
tibble(
tenor = "monthly"
, hedge = "dh"
, underlying = chr_und
, opt_loss_trigger = dbl_opt_loss_trigger
)
}
df_opt_loss_trigger <- bind_rows(lst_result)
df_opt_loss_trigger %>%
group_by(tenor, hedge) %>%
summarize(
opt_loss_trigger = mean(opt_loss_trigger)
)
